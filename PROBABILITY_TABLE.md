# CustomizeFishing 確率表

## カテゴリ一覧

| カテゴリ | 優先度 | 基本確率 | Quality | 条件 | 天気 | 状態 |
|---------|--------|----------|---------|------|------|------|
| dolphins_grace | 1 | 100.0% | 0 | 開水域+イルカの好意 | 晴れ | 有効 |
| skgkyr | 2 | 0.01% | 1 | 開水域+宝釣り10+幸運2+ | 雷雨 | 有効 |
| god | 3 | 0.05% | 0 | 開水域+宝釣り6+幸運2+ | 雨/雷雨 | 有効 |
| eternal | 4 | 0.01% | 0 | 開水域+宝釣り6+幸運2+ | 雨/雷雨 | 有効 |
| exotic | 5 | 0.05% | 0 | 開水域+宝釣り6+幸運2+ | 全天候 | 有効 |
| relic | 6 | 0.1% | 1 | 開水域+宝釣り6+幸運2+ | 全天候 | 有効 |
| mythic | 7 | 0.5% | 1 | 開水域+宝釣り6+幸運2+ | 全天候 | 有効 |
| legendary | 8 | 1.0% | 1 | 開水域+宝釣り6+幸運2+ | 全天候 | 有効 |
| epic | 9 | 5.0% | 1 | 開水域+宝釣り4+幸運1+ | 全天候 | 有効 |
| rare | 10 | 10.0% | 0 | 開水域+宝釣り3+幸運1+ | 全天候 | 有効 |
| uncommon | 11 | 15.0% | 0 | 開水域+宝釣り3+幸運1+ | 全天候 | 有効 |
| common | 12 | 20.0% | -2 | 開水域+宝釣り≤10+幸運≤3 | 全天候 | 有効 |
| treasure | 12 | 30.0% | -2 | 開水域+宝釣り≤10+幸運≤3 | 全天候 | 有効 |
| fish | 13 | 60.0% | -3 | 宝釣り≤10+幸運≤3 | 全天候 | 有効 |
| junk | 14 | 100.0% | -3 | 宝釣り≤10+幸運≤3 | 全天候 | 有効 |

## 幸運計算

### 基本幸運値
| 要素 | 計算式 | 最大値 | 最大ボーナス |
|------|---------|---------|-------------|
| **宝釣りエンチャント** | レベル × 0.10% | 10レベル | +1.00% |
| **幸運ポーション** | レベル × 0.07% | 10レベル | +0.70% |
| **装備幸運** | 値 × 0.1% | 6 | +0.60% |
| **経験値レベル** | レベル × 0.01% | 100レベル | +1.00% |

### 特殊幸運ボーナス
| 条件 | 計算式 | 説明 |
|------|---------|------|
| **宝釣りLv127以上** | 0.1 + (乱数 × コンジットレベル) | コンジットパワーレベルに応じた追加ランダムボーナス |

### 天気ボーナス
| 天気 | ボーナス |
|------|----------|
| **晴れ** | +0.0% |
| **雨** | +0.45% |
| **雷雨** | +0.9% |

### タイミングボーナス
| 判定 | 反応時間 | 倍率 | ボーナス |
|--------|----------|------|----------|
| **JUST** | 75ms以内 | 50% | +0.8% |
| **PERFECT** | 100ms以内 | 40% | +0.64% |
| **GREAT** | 300ms以内 | 30% | +0.48% |
| **GOOD** | 750ms以内 | 20% | +0.32% |
| **MISS** | 750ms超過 | 0% | +0.0% |

基本幸運ボーナス: 1.6%

### 最大幸運値計算

#### 通常時の最大幸運値
理論上の最大幸運値は5.00%となります：
- 宝釣り10: **+1.00%**
- 幸運ポーション10: **+0.70%**
- 装備幸運6: **+0.60%**
- 経験値100: **+1.00%**
- 雷雨: **+0.90%** (雨と雷雨は排他的、最大値は雷雨)
- JUSTタイミング（16.67ms以内）: **+0.80%**
- **合計: +5.00%**

#### 特殊条件時の最大幸運値
宝釣りLv127以上の場合：
- 基本宝釣りボーナス: **+0.80%** (Lv10分)
- 特殊ランダムボーナス: **+0.1% ～ +(0.1% + コンジットレベル)**
- 例：コンジットパワーLv3時 → **+0.1% ～ +3.1%** の追加ボーナス
- その他のボーナス: **+4.00%** (幸運ポーション+装備+経験値+雷雨+タイミング)
- **理論上最大: 約8.00%** (運次第でそれ以上も可能)

### ダブルフィッシング
- **発動条件**: 宝釣りLv10以上かつコンジットパワーLv2以上
- **効果**:
  - 釣りが2回分同時に処理される
  - タイミング判定は1回だけ行い、両方の結果に適用される

## 確率計算式

```
補正後確率 = floor(基本確率 + (Quality × 幸運値))
```

- Quality > 0: 幸運値が高いほど有利
- Quality = 0: 幸運値の影響なし
- Quality < 0: 幸運値が高いほど不利

### 計算例

#### 通常時（幸運値5.0%時）
幸運値5.0%での各カテゴリの補正後確率：
- **skgkyr**: 0.01% + (1 × 5.0) = 5.01%
- **god**: 0.05% + (0 × 5.0) = 0.05%
- **eternal**: 0.01% + (0 × 5.0) = 0.01%
- **exotic**: 0.05% + (0 × 5.0) = 0.05%
- **relic**: 0.1% + (1 × 5.0) = 5.1%
- **mythic**: 0.5% + (1 × 5.0) = 5.5%
- **legendary**: 1.0% + (1 × 5.0) = 6.0%
- **epic**: 5.0% + (1 × 5.0) = 10.0%
- **rare**: 10.0% + (0 × 5.0) = 10.0%
- **uncommon**: 15.0% + (0 × 5.0) = 15.0%
- **common**: 20.0% + (-2 × 5.0) = 10.0%
- **treasure**: 30.0% + (-2 × 5.0) = 20.0%
- **fish**: 60.0% + (-3 × 5.0) = 45.0%
- **junk**: 100.0% + (-3 × 5.0) = 85.0%

#### 特殊条件時（宝釣りLv127+、幸運値8.0%時）
幸運値8.0%での各カテゴリの補正後確率：
- **skgkyr**: 0.01% + (1 × 8.0) = 8.01%
- **god**: 0.05% + (0 × 8.0) = 0.05%
- **eternal**: 0.01% + (0 × 8.0) = 0.01%
- **exotic**: 0.05% + (0 × 8.0) = 0.05%
- **relic**: 0.1% + (1 × 8.0) = 8.1%
- **mythic**: 0.5% + (1 × 8.0) = 8.5%
- **legendary**: 1.0% + (1 × 8.0) = 9.0%
- **epic**: 5.0% + (1 × 8.0) = 13.0%
- **rare**: 10.0% + (0 × 8.0) = 10.0%
- **uncommon**: 15.0% + (0 × 8.0) = 15.0%
- **common**: 20.0% + (-2 × 8.0) = 4.0%
- **treasure**: 30.0% + (-2 × 8.0) = 14.0%
- **fish**: 60.0% + (-3 × 8.0) = 36.0%
- **junk**: 100.0% + (-3 × 8.0) = 76.0%

## 各カテゴリの詳細

### dolphins_grace（優先度0）
- イルカの好意エフェクト限定カテゴリ
- 晴れ天気のみで発動
- 開水域が必要
- 確率100%で最優先

### skgkyr（優先度1）
- **発動条件**: 宝釣り10以上、幸運エフェクト2以上
- 雷雨限定でのみ発動
- 基本確率1%、最大幸運値で9%
- Quality 2により幸運値で大幅に確率増加

### god（優先度3）
- 最も希少なアクティブカテゴリの一つ
- 雨または雷雨でのみ発動
- 非常に低い基本確率の0.05%
- Quality 0により幸運値の影響なし

### treasure（優先度12）
- 基本確率30%でcommonより高い
- 開水域が必要、幸運制限あり
- Quality -2により幸運値で確率低下

## 優先度システム

1. 有効なカテゴリを条件でフィルタリング
2. 優先度の低い順にソート（数値昇順）
3. 各カテゴリの補正後確率を計算
4. 乱数で最初にヒットしたカテゴリを選択

優先度が低いほど先にチェックされるため、レアカテゴリが優先されます。


